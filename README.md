# ğŸªªÂ ì‹ ìš©ì¹´ë“œ ì¶”ì²œ ë¦¬ìŠ¤íŠ¸ ì•± (Feat. ì€í–‰ì•±)

ë°±ì—”ë“œì—ì„œ ì ì‹œ ë†€ë‹¤ ì˜¨ í•„ì

ë‹¤ì‹œ ëŒì•„ì™”ë‹¤.

Readmeë§Œ ë”± ë´ë„ ë§ì€ ê²ƒì´ ë°œì „í•˜ê³  ë‹¬ë¼ì§„ ê²ƒì´ ë³´ì¸ë‹¤.

ë°±ì—”ë“œ(Spring)ì„ ê³µë¶€í•˜ê³  ë°°ìš°ë©° ë§ì€ ê²ƒì„ ë°°ìš°ê³ , iOSì— ëŒ€í•œ ì§™ì€ í–¥ìˆ˜ë¥¼ ëŠê¼ˆë‹¤.

ê·¸ë˜ì„œ ëŒì•„ì™”ë‹¤!!!

ì–´ì¨Œë“  ì˜¤ëŠ˜ ë§Œë“¤ì–´ ë³¼ ì•±ì€ ë°”ë¡œ ëŒ€ë‹¤ìˆ˜ì˜ ì€í–‰ì•±ì—ì„œ ìì£¼ ì“°ì´ëŠ” [ì‹ ìš©ì¹´ë“œ ì¶”ì²œ ë¦¬ìŠ¤íŠ¸ ì•±]ì´ë‹¤

ë§ˆì§€ë§‰ ê°œì¸ í”„ë¡œì íŠ¸ì˜€ë˜ ë¡œê·¸ì¸ ìƒ˜í”Œ ì•±ì—ì„œ ì“°ì˜€ë˜ ë°±ì—”ë“œ ëŒ€ì²´ í”Œë«í¼ì¸ Firebaseë¥¼ ì—¬ì „íˆ ì‚¬ìš©í•  ê²ƒì´ë‹¤.

Firebase ì»´í¬ë„ŒíŠ¸ì¸ Databaseë¥¼ ì´ìš©í•´ì„œ ì´ Databaseì— ì‹ ìš©ì¹´ë“œ ì¶”ì²œ ì •ë³´ë“¤ì„ ì €ì¥í•˜ê³  ì´ë¥¼ Clientì—ì„œ ë¶ˆëŸ¬ë“¤ì—¬ ì¹´ë“œ í˜œíƒ ì •ë³´ë¥¼ ì œê³µí•˜ëŠ” ì•±ì„ ë§Œë“¤ì–´ ë³¼ ê²ƒì´ë‹¤!

## Firebase Realtime Database ì•Œì•„ë³´ê¸°

ë°ì´í„°ë² ì´ìŠ¤ëŠ” ë°ì´í„°ì˜ ì§‘í•©ì²´, ì¼ë°˜ì ìœ¼ë¡œ ê´€ê³„í˜• ë°ì´í„° ë² ì´ìŠ¤ í˜•íƒœ (Spring í•  ë•Œ ë§ì´ ë°°ì› ë‹¤)

Firebaseì—ì„œ ì œê³µí•˜ëŠ” ì‹¤ì‹œê°„ ë°ì´í„°ë² ì´ìŠ¤ëŠ” ë¹„ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ì´ë‹¤.

ë¹„ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ëŠ” ë§ì€ ì •ë³´ë¥¼ ìˆ˜ì§‘í•˜ëŠ” ëª¨ë°”ì¼, ì›¹ ë“±ì— ì í•©í•˜ë‹¤.

ìš°ë¦¬ê°€ ì¼ë°˜ì ìœ¼ë¡œ ì•„ëŠ” ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ëŠ” ê° entityê°€ ë³„ë„ë¡œ ì¡´ì¬í•˜ë©° ê´€ê³„ë¥¼ ì´ë£¨ì–´ ì „ì²´ì ì¸ ì •ë³´ë¥¼ ì „ë‹¬í•œë‹¤ë©´, ë¹„ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ëŠ” JSON ê¸°ë°˜ì˜ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê³  ë‚´ë³´ë‚´ê³  ê´€ë¦¬í•˜ëŠ”ë° ìµœì í™” ë˜ì–´ìˆì–´, ì—¬ë¡œ í…Œì´ë¸”ë¡œ ì‚°ì¬ë˜ì–´ìˆë˜ ì—´ë“¤ì„ ëª¨ë‘ ê°–ëŠ” í•˜ë‚˜ì˜ ë‹¨ì¼ ë¬¸ì„œ ë‚´ì˜ ì†ì„±ìœ¼ë¡œ ì €ì¥ë  ê²ƒì´ë‹¤.

ë˜ ì‹¤ì‹œê°„ ë°ì´í„°ë² ì´ìŠ¤ë¼ëŠ” ì´ë¦„ ê·¸ëŒ€ë¡œ, ì‹¤ì‹œê°„ìœ¼ë¡œ ì‘ë™í•´ì„œ 

ìš°ë¦¬ê°€ ì¼ë°˜ì ìœ¼ë¡œ ì•„ëŠ” ë°ì´í„°ë² ì´ìŠ¤ëŠ” clientë¡œë¶€í„° http api ë¥¼ ì´ìš©í•´ requestë¥¼ ë°›ì•„ì™€ì„œ ê°’ì„ ë°›ì•„ì˜¤ëŠ”ë°,

ì‹¤ì‹œê°„ ë°ì´í„°ë² ì´ìŠ¤ëŠ” ì˜µì €ë²„ì™€ ìŠ¤ëƒ…ìƒ· ê°™ì€ ê°ì²´ë¥¼ ì œê³µí•˜ëŠ” SDKë¥¼ í†µí•´ clientì™€ ì§ì ‘ ì‹¤ì‹œê°„ìœ¼ë¡œ ë™ê¸°í™”í•˜ê²Œ ëœë‹¤. ë”°ë¼ì„œ ì‹¤ì‹œê°„ ë°ì´í„°ë² ì´ìŠ¤ì™€ ì—°ê²°ëœ ëª¨ë“  ê¸°ê¸°ëŠ” ê±°ì˜ ë™ì‹œì— ì„œë²„ì— ëª¨ë“  ë³€ê²½ì‚¬í•­ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ë°˜ì˜í•  ìˆ˜ ìˆë‹¤. 

ì•±ì´ ì˜¤í”„ë¼ì¸ ìƒíƒœì¼ ë•Œë„, ë¡œì»¬ì— ì €ì¥í•´ë’€ë‹¤ê°€ ë„¤íŠ¸ì›Œí¬ ì—°ê²° ì‹œ ë™ê¸°í™”í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ìš´ì˜ë˜ê³  

ê°€ì¥ ê°•ë ¥í•œ ê¸°ëŠ¥ì¸ 

**ë³„ë„ì˜ ì„œë²„ ì—†ì´ ë°”ë¡œ ë°ì´í„°ë² ì´ìŠ¤ì™€ clientë¥¼ ì—°ê²°!!** í•´ì¤€ë‹¤ëŠ” ê²ƒì´ë‹¤.

## Firebase Firestore Database ì•Œì•„ë³´ê¸°

ì‹¤ì‹œê°„ ë°ì´í„°ë² ì´ìŠ¤ ì´í›„ì— ë‚˜ì˜¨, ë¹„êµì  ìµœì‹  í”Œë«í¼ì´ë‹¤.

ì‹¤ì‹œê°„ ë°ì´í„°ë² ì´ìŠ¤ì™€ ê°™ì´ ë¹„ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ë¡œ ê±°ì˜ ë¹„ìŠ·í•œ ê¸°ëŠ¥ ì œê³µí•œë‹¤.

- ì‹¤ì‹œê°„ : Http ìš”ì²­ì´ ì•„ë‹Œ ë™ê¸°í™” ë°©ì‹
- ì˜¤í”„ë¼ì¸ : ë¡œì»¬ì— ì €ì¥ í›„ ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì‹œ ë™ê¸°í™”
- ì„œë²„ ì—†ì´ : ë°ì´í„°ë² ì´ìŠ¤ì™€ í´ë¼ì´ì–¸íŠ¸ ì§ì ‘ ì—‘ì„¸ìŠ¤

ê·¸ëŸ¼ ëŒ€ì²´ ì–´ë–¤ ì ì´ ë‹¤ë¥¸ ê±¸ê¹Œ??

â†’ Firebaseì—ì„œëŠ” ë‘˜ì´ ì œê³µí•˜ëŠ” ë°ì´í„° ëª¨ë¸ì´ ì°¨ì´ê°€ ìˆê³ , ë”°ë¼ì„œ ë°ì´í„° ë² ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ê³ ì í•˜ëŠ” ì•±ì´ ì–´ë–¤ íŠ¹ì„±ì„ ê°€ì§€ëƒì— ë”°ë¼ ê¶Œì¥í•˜ëŠ” ë°ì´í„°ë² ì´ìŠ¤ê°€ ë‹¤ë¥´ë‹¤ê³  ì„¤ëª…í•œë‹¤.

ë¬´ì—‡ë³´ë‹¤ Firestoreê°€ ë³´ë‹¤ ë³µí•©ì ì¸ ì¿¼ë¦¬ë¥¼ ì œê³µí•œë‹¤ê³  í•œë‹¤!!!

## Realtime Database

- ë°ì´í„° ëª¨ë‘ë¥¼ í•˜ë‚˜ì˜ í° JSON íŠ¸ë¦¬ë¡œ ì €ì¥
- í•˜ë‚˜ì˜ ë¬¸ì„œì— ì •ë ¬ || í•„í„°ë§ ê°€ëŠ¥ (ë™ì‹œì— ë¶ˆê°€)
- ê¹Šê³  ì¢ì€ ì¿¼ë¦¬(ì¦‰ ê²°ê³¼ê°’ì´ ê°–ëŠ” í•˜ìœ„ê°’ ëª¨ë‘ ë°˜í™˜ í•˜ìœ„ê°’ê¹Œì§€ ì ‘ê·¼ ê°€ëŠ¥)
- ë°ì´í„° ì„¸íŠ¸ê°€ ì»¤ì§ˆìˆ˜ë¡ ì¿¼ë¦¬ ì„±ëŠ¥ ë–¨ì–´ì§(ê¹Šìœ¼ë‹ˆê¹Œ)
    - ê¸°ë³¸ì ì¸ ë°ì´í„° ë™ê¸°í™”
    - ì ì€ì–‘ì˜ ë°ì´í„°ê°€ ìì£¼ ë³€ê²½
    - ê°„ë‹¨í•œ JSON íŠ¸ë¦¬
    - ë§ì€ ë°ì´í„°ë² ì´ìŠ¤

## Cloud Firestore

- JSONê³¼ ìœ ì‚¬í•˜ì§€ë§Œ JSONì´ ì•„ë‹Œ ë¬¸ì„œì™€ ì»¬ë ‰ì…˜ì˜ ì¡°í•©ìœ¼ë¡œ ì œê³µ. ì¦‰ í•˜ë‚˜ì˜ ì»¬ë ‰ì…˜ì´ ì—¬ëŸ¬ê°œì˜ ë¬¸ì„œë¥¼ ê°–ê³  ê°ê°ì˜ ë¬¸ì„œëŠ” í•˜ìœ„ì— ì»¬ë ‰ì…˜ì„ ê°€ì§ˆ ìˆ˜ ìˆëŠ” êµ¬ì¡°
- í•˜ë‚˜ì˜ ë¬¸ì„œì— ì •ë ¬ && í•„í„°ë§ ê°€ëŠ¥
- ì–•ê³  ë„“ì€ ì¿¼ë¦¬(íŠ¹ì • ì»¬ë ‰ì…˜ì˜ ë¬¸ì„œë§Œ ë°˜í™˜ í•´ë‹¹ ë¬¸ì„œê°€ í•˜ìœ„ì— ì»¬ë ‰ì…˜ì„ ê°–ê³  ìˆì–´ë„ ë°˜í™˜ ì•ˆí•¨)
- ë°ì´í„° ì„¸íŠ¸ê°€ ì»¤ì§ˆìˆ˜ë¡ ì¿¼ë¦¬ ì„±ëŠ¥ê³¼ëŠ” ì§ì ‘ì ì¸ ê´€ê³„ ì—†ìŒ
    - ê³ ì˜¤ê¸‰ ì¿¼ë¦¬, ì •ë ¬, íŠ¸ëœì ì…˜
    - ëŒ€ìš©ëŸ‰ ë°ì´í„°ê°€ ìì£¼ ì½í˜
    - êµ¬ì¡°í™”ëœ ì»¬ë ‰ì…˜
    - ë‹¨ì¼ ë°ì´í„°ë² ì´ìŠ¤

ìš°ë¦¬ëŠ” ì´ë²ˆì— ë‘˜ ë‹¤ êµ¬í˜„í• ê²ƒì„!!

ë§Œë“  ê³¼ì •ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.

CardListViewController ì œì‘ â†’ CreditCard ê°ì²´ ì œì‘(JSON ë°›ì„ êº¼) â†’ CustomCell ì œì‘(also created xibë¡œ UI êµ¬ì„±í•˜ëŠ” ê²ƒì´ ë” ì‰¬ì›€) â†’ CardListViewControllerì™€ CustomCell ì—°ê²°í•´ì„œ ë¼ë²¨ ë§Œë“¤ê³  delegate êµ¬ì„±(ì´ë•Œ Kingfisherë¡œ ì´ë¯¸ì§€ Url ë°›ì•„ì„œ ì´ë¯¸ì§€ë·°ì— í‘œí˜„)

```swift
override func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {
        //guard let cell = tableView.dequeueReusableCell(withIdentifier: "CardListCell", for: indexPath) as? CardListCell else {return UITableViewCell()}
        //cell.rankLabel.text = "\(creditCardList[indexPath.row].rank)ìœ„"
        //cell.promotionLabel.text = "\(creditCardList[indexPath.row].promotionDetail.amount)ë§Œì› ì¦ì •"
        //cell.cardNameLabel.text = "\(creditCardList[indexPath.row].name)"
        
        let imageURL = URL(string: creditCardList[indexPath.row].cardImageURL)
        cell.cardImageView.kf.setImage(with: imageURL)
        
        //return cell
    }
```

ì´ëŸ°ì‹ìœ¼ë¡œ Kingfisher ì‚¬ìš©

â†’ì…€ì„ íƒ­ í–ˆì„ ë•Œ ë“¤ì–´ê°ˆ ìƒì„¸ í™”ë©´ CardDetailViewController ì œì‘(ì´ë•Œ ë¡œí‹°ë¥¼ í†µí•´ ì›€ì§ì´ëŠ” ì´ë¯¸ì§€ ë„£ì–´ì¤¬ë‹¤: ì–˜ë„ ì½”ì½”ì•„íŒŸ ì´ìš©í•´ì„œ ì„¤ì¹˜) â†’ ë§ˆì§€ë§‰ìœ¼ë¡œ CardListViewControllerì—ì„œ didSelectRowAt ë§Œë“¤ì–´ì¤˜ì„œ 

```swift
override func tableView(_ tableView: UITableView, didSelectRowAt indexPath: IndexPath) {
        //ìƒì„¸í™”ë©´ ì „ë‹¬í•˜ê¸°
        let storyboard = UIStoryboard(name: "Main", bundle: Bundle.main)
        guard let detailViewController = storyboard.instantiateViewController(withIdentifier: "CardDetailViewController") as? CardDetailViewController else { return }
        
        detailViewController.promotionDetail = creditCardList[indexPath.row].promotionDetail
        self.show(detailViewController, sender: nil)
    }
```

ì„ íƒí•œ cellì˜ promotionDetail ë„˜ê²¨ì£¼ë©´ ë

ì´ëŸ¼ ê¸°ë³¸ UI êµ¬ì„±ì´ ëë‚œë‹¤!!

<img width="1790" alt="á„€á…µá„‡á…©á†«UI" src="https://github.com/jinyongyun/Credit_Card_List_APP/assets/102133961/af9e5e4c-15ab-4e92-bfab-2848d38a655b">



https://github.com/jinyongyun/Credit_Card_List_APP/assets/102133961/009dcf13-0c62-40d0-af28-42f177fb4db3



ì´ì œ Firebase Realtime dbë¥¼ ì—°ê²°í•´ë³´ì

ëŠ˜ í•˜ë˜ëŒ€ë¡œ í”„ë¡œì íŠ¸ ë§Œë“¤ì–´ì£¼ê³ , bundle ID ë³µì‚¬í•´ì£¼ê³ , GoogleService-info íŒŒì¼ ì¶”ê°€í•´ì£¼ê³  Realtime Databaseë¡œ ì´ë™!!
<img width="1372" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-12-23 á„‹á…©á„’á…® 11 27 14" src="https://github.com/jinyongyun/Credit_Card_List_APP/assets/102133961/b7777bbf-6939-461c-988f-4e6a895f15f4">
podfileì—ì„œ Firebase ì„¤ì¹˜ê³¼ì •ì—ì„œ ë¬¸ì œê°€ ë°œìƒí–ˆë‹¤

**DT_TOOLCHAIN_DIRÂ cannotÂ beÂ usedÂ toÂ evaluateÂ LIBRARY_SEARCH_PATHS,Â useÂ TOOLCHAIN_DIRÂ instead**

ìš”ë”´ ë¬¸êµ¬ê°€ ëœ¨ë©´ì„œ ë¹Œë“œê°€ ì•ˆë˜ëŠ”ë°, xcode ë²„ì „ ì—…ë°ì´íŠ¸ì— cocoapod ë²„ì „ì´ ëª»ë”°ë¼ê°€ì„œ ë°œìƒí•œ ë¬¸ì œë¼ê³  í•œë‹¤. cocoapods ì—…ë°ì´íŠ¸ë¥¼ í•´ì¤˜ì•¼ í•œë‹¤.

`$ sudo gem install cocoapods`

ë¥¼ í•´ì£¼ë ¤ê³  í–ˆëŠ”ë° ì—ëŸ¬ ë°œìƒ 

ignoring ffi-1.15.5 because its extensions are not built. try: gem pristine ffi --version 1.15.5

ë­ê°€ ë¬¸ì œì¸ê°€ ìƒê°í•´ë³´ë‹¤, í˜¹ì‹œ ì½”ì½”ì•„íŒŸì„ ì—…ë°ì´íŠ¸ í•´ì£¼ëŠ” ë£¨ë¹„ ìì²´ì—ì„œ ë¬¸ì œê°€ ìƒê¸´ê±´ê°€ ì‹¶ì–´ì„œ ë£¨ë¹„ë¥¼ ì—…ë°ì´íŠ¸ í•´ì¤¬ë‹¤. ë£¨ë¹„ ì—…ë°ì´íŠ¸ í›„ ì½”ì½”ì•„íŒŸ ì—…ë°ì´íŠ¸ê¹Œì§€ í•´ì£¼ë‹ˆâ€¦

- í•´ê²°ê³¼ì •
    
    > 1. brew update
    > 
    > 
    > ì»¤ë©˜ë“œë¥¼ ì´ìš©í•´ brew ì—…ë°ì´íŠ¸
    > 
    
    > 2. brew install rbenv ruby-build
    > 
    > 
    > 'rbenv' ì„¤ì¹˜
    > 
    > 'rbenv versions' ìœ¼ë¡œ ë²„ì „í™•ì¸ ì‹œ ì•„ë˜ì™€ ê°™ì´ ë‚˜ì˜¤ë©´ ì„¤ì¹˜ ì™„ë£Œ
    > 
    > ```
    > * system
    > ```
    > 
    > [* system] -> í˜„ì¬ ì‚¬ìš©ì¤‘ì¸ ë²„ì „ì€ ë§¥ë¶ì˜ ê¸°ë³¸ system ë²„ì „ì´ë¼ëŠ” ëœ»
    > 
    
    > 3. rbenv install -l
    > 
    
    ì„¤ì¹˜ ê°€ëŠ¥í•œ ë²„ì „ ë¦¬ìŠ¤íŠ¸ í™•ì¸
    
    > 4. rbenv install 2.7.4
    > 
    > 
    > ì›í•˜ëŠ” ë²„ì „ ì„¤ì¹˜
    > 
    
    > 5. rbenv versions
    > 
    > 
    > ë²„ì „ ë‹¤ì‹œ í™•ì¸, ì•„ë˜ì™€ ê°™ì´ ë‚˜ì˜¤ë©´ ì„¤ì¹˜ ì™„ë£Œ
    > 
    > ```
    > * system
    >   2.7.4
    > ```
    > 
    
    > 6. rbenv global 2.7.2
    > 
    > 
    > systemìœ¼ë¡œ ë˜ì–´ìˆëŠ” default rubyë¥¼ ìƒˆë¡œ ì„¤ì¹˜í•œ ë²„ì „ìœ¼ë¡œ ë³€ê²½
    > 
    > 'rbenv versions' ìœ¼ë¡œ ë²„ì „í™•ì¸ ì‹œ ì•„ë˜ì™€ ê°™ì´ ë‚˜ì˜¤ë©´ ë³€ê²½ ì™„ë£Œ
    > 
    > ```
    >   system
    > * 2.7.4 (set by /Users/{ì‚¬ìš©ìì´ë¦„}/.rbenv/version)
    > ```
    > 
    
    > 6. Pathë¥¼ ì§€ì •
    > 
    > 
    > Pathë¥¼ ì§€ì •í•˜ê¸° ìœ„í•´ ì•„ë˜ ëª…ë ¹ì–´ ì…ë ¥
    > 
    > ```
    > echo '# rbenv' >> ~/.zshrc
    > echo 'export PATH=~/.rbenv/bin:$PATH' >> ~/.zshrc
    > echo 'eval "$(rbenv init -)"' >> ~/.zshrc
    > 
    > source ~/.zshrc
    > ```
    > 

ê·¸ë¬ë”ë‹ˆ ë¹Œë“œ ì„±ê³µ!!
```swift
import UIKit
import Firebase

@main
class AppDelegate: UIResponder, UIApplicationDelegate {

    func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -> Bool {
        FirebaseApp.configure()
        return true
    }
```

AppDelegateì— ë‹¤ìŒê³¼ ê°™ì´ ì´ˆê¸°í™” í•˜ë©´ Firebase ì—°ê²° ë!

ìš°ë¦¬ëŠ” ë””ë¹„ì—ì„œ CardListViewControllerì˜ **var** creditCardList: [CreditCard] = [] í˜•íƒœë¡œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ê±°ë‹ˆê¹Œ, CardListViewControllerì— FirebaseDatabaseë¥¼ importí•´ì¤€ë‹¤.

```swift
var ref: DatabaseReference!  //Firebase Realtime Databaseë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆëŠ” reference ê°’
```

ê·¸ ë‹¤ìŒ ë‹¤ìŒê³¼ ê°™ì´ DatabaseReferenceë¥¼ ì„ ì–¸í•´ì¤€ë‹¤. 

```swift
override func viewDidLoad() {
        super.viewDidLoad()
        
        //UITableView Cell register
        let nibName = UINib(nibName: "CardListCell", bundle: nil)
        tableView.register(nibName, forCellReuseIdentifier: "CardListCell")
        
        ref = Database.database().reference()
        
    }
```

viewDidLoadì— ë‹¤ìŒê³¼ ê°™ì´ Database.database().reference() ì„ ì–¸ì„ í•´ì£¼ë©´ Firebaseê°€ ìš°ë¦¬ê°€ ë§Œë“  dbë¥¼ ì¡ì•„ë‚´ê³  ë°ì´í„° íë¦„ì„ ì£¼ê³ ë°›ì„ ê²ƒì´ë‹¤.

ì´ì œ dbì— ì €ì¥í•´ ë‘” ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ ë³´ì

```swift
override func viewDidLoad() {
        super.viewDidLoad()
        
        //UITableView Cell register
        let nibName = UINib(nibName: "CardListCell", bundle: nil)
        tableView.register(nibName, forCellReuseIdentifier: "CardListCell")
        
        ref = Database.database().reference()
        
        ref.observe(.value) { snapshot in
            guard let value = snapshot.value as? [String: [String: Any]] else {return}
            
            do {
                let jsonData = try JSONSerialization.data(withJSONObject: value)
                let cardData = try JSONDecoder().decode([String: CreditCard].self, from: jsonData)
                let cardList = Array(cardData.values)
                self.creditCardList = cardList.sorted { $0.rank < $1.rank }
                DispatchQueue.main.async {
                    self.tableView.reloadData()
                }
                
            } catch let error {
                print("ERROR JSON parsing \(error.localizedDescription)")
            }
        }
    }
```

ì‹¤ì‹œê°„ ë°ì´í„° ë² ì´ìŠ¤ëŠ” snapshotì´ë€ ê°ì²´ë¥¼ í†µí•´ì„œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¨ë‹¤.

referenceì—ì„œ ê°’ì„ ì§€ì¼œë³´ê³  ìˆë‹¤ê°€ ê°’ì„ snapshotì´ë¼ëŠ” ê°ì²´ë¡œ ì „ë‹¬í•˜ê²Œ ëœë‹¤.

ìš°ë¦¬ëŠ” ì´ ê°ì²´ë¥¼ í´ë¡œì € ë‚´ì—ì„œ ì˜ ê°€ê³µí•œ ë’¤ ì´ìš©í•˜ë©´ ëœë‹¤.

ì „ë‹¬ë˜ëŠ” snapshotì—ì„œ valueëŠ” ìš°ë¦¬ê°€ ì´í•´í•˜ê³  ìˆëŠ” ë°ì´í„°ë² ì´ìŠ¤ì˜ í˜•íƒœë¥¼ ì§€ì •í•´ì£¼ëŠ” ê²ƒì´ë‹¤.

[String: [String: Any]] ì´ë ‡ê²Œ íƒ€ì…ì„ ì •í™•í•˜ê²Œ ì§€ì •í•˜ì§€ ì•Šìœ¼ë©´ ë””ë¹„ëŠ” ìŠ¤ëƒ…ìƒ·ì—ì„œ ì „ë‹¬ë°›ì€ ê°’ì„ ì´í•´í•˜ì§€ ëª»í•´ í•­ìƒ nilì„ ë°©ì¶œí•˜ê²Œ ëœë‹¤.

ì œëŒ€ë¡œ valueë¥¼ ì „ë‹¬ ë°›ì•˜ë‹¤ë©´ ìš°ë¦¬ëŠ” codableì˜ decodeë¥¼ í†µí•´ ê¸°ì¡´ì— ë§Œë“¤ì–´ë‘ì—ˆë˜ creditCard ê°ì²´ì˜ ë°°ì—´ë¡œ ë§Œë“¤ì–´ì¤„ ìˆ˜ ìˆë‹¤. 

ì´í›„ ì „ë‹¬ì„ ì˜ ë°›ì•˜ë‹¤ë©´ self.tableView.reloadData() ì´ë ‡ê²Œ í…Œì´ë¸” ë·° ë¦¬ë¡œë“œë¥¼ í•´ì¤˜ì•¼ ë°›ì€ ë°ì´í„°ê°€ ì˜ í‘œí˜„ë í…ë° UIë¥¼ í‘œí˜„í•˜ëŠ” ê²ƒì´ë‹ˆ ë©”ì¸ìŠ¤ë ˆë“œì—ì„œ ì‘ë™ì„ í•´ì•¼í•œë‹¤. ë”°ë¼ì„œ DispatchQueue ì„¤ì •ì„ ë”°ë¡œ í•´ì¤€ê²ƒì´ë‹¤.


https://github.com/jinyongyun/Credit_Card_List_APP/assets/102133961/6e54902e-3379-4a3e-886f-b380058000c7


ì´ì œ ì´ë ‡ê²Œ ì˜ ì½ì–´ì˜¨ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ë‹¨ìˆœíˆ ì½ì–´ ì˜¤ëŠ” ê²ƒ ë¿ë§Œì´ ì•„ë‹ˆë¼ ì•±ì˜ íŠ¹ì • ì•¡ì…˜ì„ í†µí•´ ì•±ì„ í†µí•´ ë°ì´í„°ë² ì´ìŠ¤ì— ì“¸ ìˆ˜ ìˆë„ë¡ í•  ê²ƒì´ë‹¤.

ì²˜ìŒ Firebaseì—ì„œ JSON íŒŒì¼ ê°€ì ¸ì˜¤ê¸° ì˜µì…˜ìœ¼ë¡œ ë””ë¹„ì— ë°ì´í„°ë¥¼ ì‘ì„±í–ˆëŠ”ë°, ì´ë²ˆì—ëŠ” ì›¹ ì½˜ì†”ì´ ì•„ë‹ˆë¼ ì•±ì˜ ì•¡ì…˜ì„ í†µí•´ì„œ ì „ë‹¬í•´ë³´ê² ë‹¤.

ì‚¬ìš©ìê°€ ì…€ì„ ì„ íƒí• ë•Œë§ˆë‹¤ CreditCard ê°ì²´ì— ìˆëŠ” isSelected ê°’ì— trueë¼ëŠ” ê°’ì„ ë¶€ì—¬í•˜ê³  ì´ê²ƒì„ ë””ë¹„ì— ì‘ì„±í•´ë³´ê² ë‹¤.

```swift
import Foundation

struct CreditCard: Codable {
    let id: Int
    let rank: Int
    let name: String
    let cardImageURL: String
    let promotionDetail: PromotionDetail
    let isSelected: Bool?
    
}

struct PromotionDetail: Codable {
    let companyName: String
    let period: String
    let amount: Int
    let condition: String
    let benefitCondition: String
    let benefitDetail:String
    let benefitDate: String
}
```

CardListViewControllerì—ì„œ didSelectRowAtì—ë‹¤ ì½”ë“œë¥¼ ì¶”ê°€í•˜ë©´ ë  ê²ƒì´ë¼ ë§‰ì—°í•˜ê²Œ ìƒê°ëœë‹¤.

```swift
override func tableView(_ tableView: UITableView, didSelectRowAt indexPath: IndexPath) {
        //ìƒì„¸í™”ë©´ ì „ë‹¬í•˜ê¸°
        let storyboard = UIStoryboard(name: "Main", bundle: Bundle.main)
        guard let detailViewController = storyboard.instantiateViewController(withIdentifier: "CardDetailViewController") as? CardDetailViewController else { return }
        
        detailViewController.promotionDetail = creditCardList[indexPath.row].promotionDetail
        self.show(detailViewController, sender: nil)
        
        **let cardID = creditCardList[indexPath.row].id
        ref.child("Item\(cardID)/isSelected").setValue(true)**
        
    }
```

ì´ë ‡ê²Œ ì„ íƒí•œ ì…€ì˜ CreditCard ê°ì²´ì˜ idë¥¼ í†µí•´ 
ref.childë¡œ pathë¥¼ ì „ë‹¬í•˜ì—¬ item0/isSelected ê²½ë¡œê°€ í¬í•¨í•˜ëŠ” ê³³ì— setValueë¥¼ trueë¡œ ì„¤ì •í•˜ë©´ ëœë‹¤.

ì‹¤ì œë¡œ ì‹œë®¬ì„ ëŒë ¤ë³´ë©´ ì…€ì„ ì„ íƒí•˜ìë§ˆì ë””ë¹„ìƒì—ì„œ isSelectedê°€ ìƒˆë¡œ ìƒê²¨ë‚˜ê³  í•´ë‹¹ ê°’ì´ trueë¡œ ë°”ë€ŒëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.



https://github.com/jinyongyun/Credit_Card_List_APP/assets/102133961/30b2c346-79a8-4540-9fb6-a341acc07510



ì—¬ê¸°ì„œ ë¬¸ì œëŠ” **"Item\(cardID)/isSelected" ì´ ë¶€ë¶„ì—ì„œ Item\(cardID) ì´ ê°’ì„ keyë¡œ isSelectedë¥¼ ì§€ì •í•´ì¤€ ê²ƒì´ë‹¤.**

í•´ë‹¹ ê°’ì€ ì–´ë–»ê²Œ êµ¬ì¡°í™”ë˜ëŠëƒì— ë”°ë¼ ì„ì˜ì˜ Stringì´ ë  ìˆ˜ë„ ìˆì–´ ë³´ë‹¤ í™•ì‹¤íˆ í•˜ë ¤ë©´ ê°ì²´ì˜ íŠ¹ì • ì»´í¬ë„ŒíŠ¸ ê°’ì„ ê²€ìƒ‰í•´ì„œ ê°ì²´ì˜ ìŠ¤ëƒ…ìƒ·ì„ ê°€ì ¸ì™€ì•¼ í•œë‹¤.

```swift
//option 2 : ì»´í¬ë„ŒíŠ¸ ë¬¼ì–´ë´
        ref.queryOrdered(byChild: "id").queryEqual(toValue: cardID).observe(.value) { [weak self] snapshot in
            guard let self = self,
                  let value = snapshot.value as? [String: [String: Any]],
                  let key = value.keys.first else {return}
            
            ref.child("\(key)/isSelected").setValue(true)
        }
```

ìœ„ì—ì„œ ë´¤ë˜ snapshot ë°ì´í„° ì½ê¸°ì™€ ë¹„ìŠ·í•˜ë‹¤.  ë°ì´í„° ì‚­ì œëŠ” nilì„ ì“°ë©´ ëœë‹¤. (ë˜ëŠ” ë³´ë‹¤ ëª…ì‹œì ìœ¼ë¡œ removeValueë¥¼ ì‚¬ìš©í•´ì„œ - ì €ê¸° setValue ëŒ€ì‹  removeValue ì‚¬ìš©í•˜ë©´ ë¨ - ì‚­ì œí•˜ì)

íŠ¹ì • ì‹ ìš©ì¹´ë“œë¥¼ ì•± ìƒì—ì„œ ì§€ìš°ë ¤ëŠ” ì•¡ì…˜ì„ í•˜ë©´ ì‹¤ì œë¡œ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œë„ ì‚­ì œë˜ë„ë¡ í•´ë³´ê² ë‹¤.

```swift
override func tableView(_ tableView: UITableView, canEditRowAt indexPath: IndexPath) -> Bool {
        return true
    }
    
    override func tableView(_ tableView: UITableView, commit editingStyle: UITableViewCell.EditingStyle, forRowAt indexPath: IndexPath) {
        if editingStyle == .delete {
            //Option1
            let cardID = creditCardList[indexPath.row].id
            ref.child("Item\(cardID)").removeValue()
            
            //Option2 : ê²½ë¡œ ëª°ë¼
//            ref.queryOrdered(byChild: "id").queryEqual(toValue: cardID).observe(.value) { [weak self] snapshot in
//                guard let self = self,
//                      let value = snapshot.value as? [String: [String: Any]],
//                      let key = value.keys.first else { return }
//                
//                self.ref.child(key).removeValue()
//
//            }
        }
    }
```

ì´ë ‡ê²Œ í…Œì´ë¸”ë·°ì—ì„œ ì…€ ìˆ˜ì •ì„ í—ˆìš©í•˜ë„ë¡ í•˜ê³ (canEditRowAt)
editingStyle ë©”ì„œë“œë¥¼ ì„ ì–¸í•œ ë‹¤ìŒ ì„ íƒí•œ ì¸ë±ìŠ¤ì— í•´ë‹¹í•˜ëŠ” ì…€ì˜ ì•„ì´ë””ë¥¼ ì–»ì–´ì™€ì„œ í•´ë‹¹ ê²½ë¡œë¡œ ì‚­ì œ ëª…ë ¹ì„ ë³´ë‚´ê±°ë‚˜ ì•„ë‹ˆë©´ ìœ„ì—ì„œ í–ˆë˜ ê²ƒì²˜ëŸ¼ ì§ì ‘ ì•„ì´ë””ë¥¼ ê²€ìƒ‰í•´ì„œ ëª…ë ¹í•˜ëŠ” ë°©ì‹ì´ ìˆë‹¤.


https://github.com/jinyongyun/Credit_Card_List_APP/assets/102133961/518eb512-01eb-48fd-a84f-b57acf13d8c8


## ì´ì œ ì—¬ê¸°ì„œë¶€í„´ Firebase Firestore Database ì—°ê²°!!

pod 'Firebase/Firestore'
pod 'FirebaseFirestoreSwift'

pod íŒŒì¼ì— ë‹¤ìŒ ë‘ podì„ ì¶”ê°€í•´ì£¼ê³  pod install

Firebaseì˜ Firestore ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ë¹Œë“œ ì°½ì—ì„œ ì„ íƒí•˜ì—¬ (í…ŒìŠ¤íŠ¸ ëª¨ë“œë¡œ) ë§Œë“¤ì–´ì¤€ë‹¤.

ë§Œë“¤ì–´ì§„ Firestoreë¥¼ ë³´ë©´ ì»¬ë ‰ì…˜ > ë¬¸ì„œ > ì»¬ë ‰ì…˜ êµ¬ì¡°ë¡œ ë°ì´í„°ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.

ì•ˆíƒ€ê¹ê²Œë„ FirestoreëŠ” JSON ê°€ì ¸ì˜¤ê¸°ë¥¼ ì§€ì›í•˜ì§€ëŠ” ì•ŠëŠ”ë‹¤.

ë‹¤ë§Œ batchë¡œ ì½”ë“œë¥¼ í†µí•´ ì½ê¸° ì‘ì—…ì„ í•  ìˆ˜ ìˆë‹¤.

ë¯¸ë¦¬ ë§Œë“¤ì–´ë‘” CreditCardDummy íŒŒì¼ì„ ì¶”ê°€í•´ì£¼ê³ 

AppDelegateì— Realtime ë•Œ í–ˆë˜ ê²ƒê³¼ ë§ˆì°¬ê°€ì§€ë¡œ ì´ˆê¸°í™”ë¥¼ í•´ì¤˜ì•¼ í•œë‹¤.

**import** FirebaseFirestoreSwift ì¶”ê°€í•´ì£¼ê³  let db = Firestore.firestore() ë””ë¹„ì„ ì–¸

ë””ë¹„ì— collectionì„ ë§Œë“¤ì–´ì¤„ê±´ë°, ì´ë¦„ì€ creditCardList ìš°ë¦¬ëŠ” CreditCardDummyì—ì„œ ê°€ì ¸ì˜¤ë‹ˆê¹Œ getDocuments 

Firestoreë„ snapshotì„ ì´ìš©í•œë‹¤!! 

snapshotì´ ë¹„ì–´ìˆì„ ë•Œë§Œ ì‹¤í–‰í•˜ê³ 

batchë¥¼ í•˜ë‚˜ ë§Œë“¤ì–´ì£¼ê³ , ì´ batchì•ˆì— í•˜ë‚˜ì”© ê°ì²´ë¥¼ ë„£ì„ ìˆ˜ ìˆë„ë¡ íŒŒì¼ ê²½ë¡œ ì¦‰ referenceë¥¼ ë§Œë“¤ì–´ì¤„ ê²ƒì´ë‹¤. dbì— ì»¬ë ‰ì…˜ì´ ìˆëŠ”ë°, ì´ ì»¬ë ‰ì…˜ì˜ ê²½ë¡œëŠ” â€œcreditCardListâ€ì´ë‹¤. ê·¸ë¦¬ê³  documentë¥¼ ì¶”ê°€í•´ì¤„ ê±´ë° ì´ documentì˜ ê²½ë¡œëŠ” card0â€¦ì´ë ‡ê²Œ ë°˜ë³µí•´ì„œ 10ê°œì˜ refë¥¼ ë§Œë“¤ì–´ì£¼ê³ 

```swift
func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -> Bool {
        FirebaseApp.configure()
        
        let db = Firestore.firestore()
        
        db.collection("creditCardList").getDocuments { snapshot, _ in
            guard snapshot?.isEmpty == true else { return }
            let batch = db.batch()
            
            let card0Ref = db.collection("creditCardList").document("card0")
            let card1Ref = db.collection("creditCardList").document("card1")
            let card2Ref = db.collection("creditCardList").document("card2")
            let card3Ref = db.collection("creditCardList").document("card3")
            let card4Ref = db.collection("creditCardList").document("card4")
            let card5Ref = db.collection("creditCardList").document("card5")
            let card6Ref = db.collection("creditCardList").document("card6")
            let card7Ref = db.collection("creditCardList").document("card7")
            let card8Ref = db.collection("creditCardList").document("card8")
            let card9Ref = db.collection("creditCardList").document("card9")
         
            do {
                try batch.setData(from: CreditCardDummy.card0, forDocument: card0Ref)
                try batch.setData(from: CreditCardDummy.card1, forDocument: card1Ref)
                try batch.setData(from: CreditCardDummy.card2, forDocument: card2Ref)
                try batch.setData(from: CreditCardDummy.card3, forDocument: card3Ref)
                try batch.setData(from: CreditCardDummy.card4, forDocument: card4Ref)
                try batch.setData(from: CreditCardDummy.card5, forDocument: card5Ref)
                try batch.setData(from: CreditCardDummy.card6, forDocument: card6Ref)
                try batch.setData(from: CreditCardDummy.card7, forDocument: card7Ref)
                try batch.setData(from: CreditCardDummy.card8, forDocument: card8Ref)
                try batch.setData(from: CreditCardDummy.card9, forDocument: card9Ref)
            } catch let error {
                print("ERROR writing card to Firestore \(error.localizedDescription)")
            }
            
            
            batch.commit()
        }
        
        return true
    }
```

ì´ì œ ë²”ìœ„ì— ìˆëŠ” ì•„ì´ë“¤ì„ batchì— ë„£ì–´ì¤˜ì•¼ í•œë‹¤. setData í•¨ìˆ˜ê°€ throw í•¨ìˆ˜ë¼ do try catch êµ¬ë¬¸ì— ë„£ì–´ì¤€ë‹¤.

ì´ë ‡ê²Œ í•˜ë©´ ë°ì´í„° ì„¤ì •ê¹Œì§€ ì™„ë£Œ, ì¤‘ìš”í•œ ê²ƒì€ **batchì—ì„œ ë§ˆì§€ë§‰ì— ê¼­ commitì„ í•´ì¤˜ì•¼!!** 

ì‹¤í–‰ì‹œì¼œë³´ë©´ firebase Firestoreì— ë°ì´í„°ê°€ ì œëŒ€ë¡œ ë“¤ì–´ê°€ ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

<img width="1372" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-12-23 á„‹á…©á„’á…® 11 27 14" src="https://github.com/jinyongyun/Credit_Card_List_APP/assets/102133961/7edefb82-8ea4-4e7d-8a3e-fc414405f51f">


Realtime ê´€ë ¨ refëŠ” ì£¼ì„ì²˜ë¦¬í•´ì¤¬ë‹¤.

ì´ì œ Realtime dbë¡œ ì²˜ë¦¬í–ˆë˜ ë™ì¼í•œ ì•¡ì…˜(ì…ë ¥ ìˆ˜ì • ì‚­ì œ)ì„ Firestoreë¥¼ í†µí•´ êµ¬í˜„í•´ë³´ê² ë‹¤.

CardListViewControllerì— **import** FirebaseFirestore ì¶”ê°€

ì•„ê¹Œ AppDelegateì—ì„œ í–ˆë˜ ê²ƒì²˜ëŸ¼ db ì¶”ê°€

**var** db = Firestore.firestore()

db.collection("creditCardList").addSnapshotListener { snapshot, error **in**

}

ì‹¤ì‹œê°„ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ observeë¡œ í‘œí˜„í–ˆë˜ ê²ƒì²˜ëŸ¼ ì—¬ê¸°ì„  addSnapshotListenerë¡œ í‘œí˜„í•´ì¤€ë‹¤.

ê°ê°ì˜ í‘œí˜„ê³¼ ë°”ë¼ë³´ëŠ” ë””ë¹„ë§Œ ë‹¤ë¥¼ ë¿ ë¬¸ë²•ì€ ê±°ì˜ ë¹„ìŠ·í•˜ë‹¤! (ì•„ë˜ë¥¼ viewDidLoadì— )

```swift
//Firestore ì½ê¸°
        db.collection("creditCardList").addSnapshotListener { snapshot, error in
            guard let documents = snapshot?.documents else {
                print("ERROR Firestore fetching document \(String(describing: error))")
                return
            }
            
            self.creditCardList = documents.compactMap { doc -> CreditCard? in
                do {
                    let jsonData = try JSONSerialization.data(withJSONObject: doc.data(), options: [])
                    let creditCard = try JSONDecoder().decode(CreditCard.self, from: jsonData)
                    return creditCard
                } catch let error {
                    print("ERROR JSON Parsing \(error)")
                    return nil
                }
            }.sorted { $0.rank < $1.rank }
        }
```

creditCardList documentë¥¼ ë°”ë¼ë³¼ ê±´ë° 

ì—¬ê¸°ì„œ compactMapì„ ì“´ ì´ìœ ëŠ” ì´ documentì—ì„œ nilê°’ì„ ë°˜í™˜í–ˆì„ ë•Œ nilê°’ì„ ë°°ì—´ ì•ˆì— ë„£ì§€ ì•Šê¸° ìœ„í•´! ì´ë ‡ê²Œ ì¨ì£¼ë©´ ë°ì´í„° ì½ê¸°ëŠ” ë—!

ì´ì œ ë°ì´í„° ì“°ê¸°ë¥¼ í•´ë³´ê² ë‹¤. ì´ë…€ì„ë„ ì‹¤ì‹œê°„ ë””ë¹„ì™€ ê°™ì´ ê²½ë¡œë¥¼ ì•Œê³  ìˆëŠ” ì˜µì…˜1ê³¼ ëª¨ë¥¼ ë•Œ ì˜µì…˜2ë¡œ ë‚˜ë‰˜ì–´ì§„ë‹¤. 

```swift
override func tableView(_ tableView: UITableView, didSelectRowAt indexPath: IndexPath) {
        //ìƒì„¸í™”ë©´ ì „ë‹¬í•˜ê¸°
        let storyboard = UIStoryboard(name: "Main", bundle: Bundle.main)
        guard let detailViewController = storyboard.instantiateViewController(withIdentifier: "CardDetailViewController") as? CardDetailViewController else { return }
        
        detailViewController.promotionDetail = creditCardList[indexPath.row].promotionDetail
        self.show(detailViewController, sender: nil)
        
        //ì‹¤ì‹œê°„ ë°ì´í„°ë² ì´ìŠ¤ ì“°ê¸°
//        // option 1 : key ì§€ì • ì‚¬ìš©
//        let cardID = creditCardList[indexPath.row].id
//        ref.child("Item\(cardID)/isSelected").setValue(true)
        
//        //option 2 : ì»´í¬ë„ŒíŠ¸ ë¬¼ì–´ë´
//        ref.queryOrdered(byChild: "id").queryEqual(toValue: cardID).observe(.value) { [weak self] snapshot in
//            guard let self = self,
//                  let value = snapshot.value as? [String: [String: Any]],
//                  let key = value.keys.first else {return}
//            
//            ref.child("\(key)/isSelected").setValue(true)
//        }
        
        //Firestore ì“°ê¸°
        //Option1 : ê²½ë¡œ ì•Œê³  ìˆì–´
        let cardID = creditCardList[indexPath.row].id
        //db.collection("creditCardList").document("card\(cardID)").updateData(["isSelected" : true])
        
        //Option2 : ê²½ë¡œë¥¼ ëª°ë¼
        db.collection("creditCardList").whereField("id", isEqualTo: cardID).getDocuments { snapshot, _ in
            guard let document = snapshot?.documents.first else {
                print("ERROR Firestore fetching document")
                return
            }
            
            document.reference.updateData(["isSelected" : true]) //documentì˜ referenceì— updateDataë¥¼ í•´ë¼!
            
        }
    }
```

ê²½ë¡œë¥¼ ì•Œê³  ìˆì„ ë•ŒëŠ” cardIDë¥¼ ê°€ì ¸ì™€ì„œ dbì˜ collection(ì´ë¦„ì€ creditCardList)ì˜ documentë¥¼ ê°€ì ¸ì™€ ë°ì´í„°ë¥¼ ì—…ë°ì´íŠ¸ í•´ì£¼ë©´ ëœë‹¤ (ì˜ ì‹¬í”Œ)

í•˜ì§€ë§Œ ëœë¤ ê°’ìœ¼ë¡œ IDë¥¼ ë¶€ì—¬í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ê²½ë¡œë¥¼ ëª¨ë¥´ëŠ” ê²½ìš°ë„ ì‚´í´ë´ì•¼í•œë‹¤. ì‹¤ì‹œê°„ ë””ë¹„ì—ì„œì™€ ê°™ì´ ì•„ì´ë”” ê²€ìƒ‰ì„ í†µí•´ documentë¥¼ ê°€ì ¸ì˜¤ê³  í•´ë‹¹ documentì— referenceë¡œ ì ‘ê·¼ í›„ updateData í•´ì£¼ë©´ ëœë‹¤!

ë§ˆì§€ë§‰ìœ¼ë¡œ ë°ì´í„° ì‚­ì œí•˜ê¸°

ì´ ì—­ì‹œ ê²½ë¡œë¥¼ ì•Œ ë•Œì™€ ëª¨ë¥¼ ë•Œë¡œ ë‚˜ë‰˜ì–´ì§„ë‹¤.

ìœ„ì˜ ì½”ë“œì™€ ë¹„ìŠ·í•˜ê³  delete í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒë§Œ ë‹¤ë¥´ë‹¤.

```swift
override func tableView(_ tableView: UITableView, commit editingStyle: UITableViewCell.EditingStyle, forRowAt indexPath: IndexPath) {
        if editingStyle == .delete {
            //ì‹¤ì‹œê°„ ë°ì´í„°ë² ì´ìŠ¤ ì‚­ì œ
//            //Option1
//            let cardID = creditCardList[indexPath.row].id
//            ref.child("Item\(cardID)").removeValue()
            
            //Option2 : ê²½ë¡œ ëª°ë¼
//            ref.queryOrdered(byChild: "id").queryEqual(toValue: cardID).observe(.value) { [weak self] snapshot in
//                guard let self = self,
//                      let value = snapshot.value as? [String: [String: Any]],
//                      let key = value.keys.first else { return }
//                
//                self.ref.child(key).removeValue()
//
//            }
            
            //Firestoreì˜ ì‚­ì œ
            //Option1 : ê²½ë¡œ ì•Œì•„
            let cardID = creditCardList[indexPath.row].id
            //db.collection("creditCardList").document("card\(cardID)").delete()
            //Option2 : ê²½ë¡œ ëª°ë¼
            db.collection("creditCardList").whereField("id", isEqualTo: cardID).getDocuments { snapshot, _ in
                guard let document = snapshot?.documents.first else {
                    print("ERROR")
                    return
                }
                
                document.reference.delete()
            }
        }
    }
```


https://github.com/jinyongyun/Credit_Card_List_APP/assets/102133961/ed3d1b0b-a20f-45b0-8a86-8631ff9d358c

